{"ast":null,"code":"var _jsxFileName = \"/home/alisa/fullstack/osa7/bloglist-frontend/src/App.js\";\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { BrowserRouter as Router, Route, Link, Redirect } from 'react-router-dom';\nimport Notification from './components/Notification';\nimport LoginForm from './components/LoginForm';\nimport Users from './components/Users';\nimport User from './components/User';\nimport Bloglist from './components/Bloglist';\nimport Blog from './components/Blog';\nimport blogService from './services/blogs';\nimport loginService from './services/login';\nimport { useField } from './hooks/useField';\nimport { setAndResetNotification } from './reducers/notificationReducer';\nimport { initializeBlogs } from './reducers/blogReducer';\nimport { initializeUsers } from './reducers/userReducer';\nimport { loginUser, logoutUser } from './reducers/loginReducer';\nimport { Container, Menu, Button } from 'semantic-ui-react';\n\nconst App = props => {\n  const username = useField('text');\n  const password = useField('password');\n  useEffect(() => {\n    props.initializeBlogs();\n  }, []);\n  useEffect(() => {\n    props.initializeUsers();\n  }, []);\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBloglistUser');\n\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON);\n      props.loginUser(user);\n      blogService.setToken(user.token);\n    }\n  }, []);\n\n  const loginForm = () => {\n    return React.createElement(LoginForm, {\n      username: username,\n      password: password,\n      handleSubmit: handleLogin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    });\n  };\n\n  const handleLogin = async event => {\n    event.preventDefault();\n\n    try {\n      const user = await loginService.login({\n        username,\n        password\n      });\n      window.localStorage.setItem('loggedBloglistUser', JSON.stringify(user));\n      blogService.setToken(user.token);\n      props.loginUser(user);\n    } catch (exception) {\n      props.setAndResetNotification({\n        message: 'Wrong username or password',\n        type: 'error'\n      });\n    }\n  };\n\n  const handleLogout = () => {\n    window.localStorage.removeItem('loggedBloglistUser');\n    props.logoutUser();\n  };\n\n  const userById = id => props.users.find(user => user.id === id);\n\n  const blogsByUserId = id => props.blogs.filter(blog => blog.user.id === id);\n\n  const blogById = id => props.blogs.find(blog => blog.id === id);\n\n  if (props.loggedIn === null) {\n    return React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"Blog list app\"), React.createElement(Notification, {\n      type: props.notification.type,\n      message: props.notification.message,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, \"Log in to application\"), loginForm());\n  }\n\n  return React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, React.createElement(Router, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(Menu, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(Menu.Item, {\n    name: \"blogs\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, React.createElement(Link, {\n    style: {\n      padding: 5\n    },\n    to: \"/blogs\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, \"blogs\")), React.createElement(Menu.Item, {\n    name: \"users\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, React.createElement(Link, {\n    style: {\n      padding: 5\n    },\n    to: \"/users\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, \"users\")), React.createElement(Menu.Item, {\n    name: \"logged in\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, props.loggedIn.name, \" logged in\", React.createElement(Button, {\n    onClick: handleLogout,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, \"logout\"))), React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    render: () => React.createElement(Redirect, {\n      to: \"/blogs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: \"/blogs\",\n    render: () => React.createElement(Bloglist, {\n      handleLogout: handleLogout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: \"/users\",\n    render: () => React.createElement(Users, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: \"/users/:id\",\n    render: ({\n      match\n    }) => React.createElement(User, {\n      user: userById(match.params.id),\n      blogs: blogsByUserId(match.params.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: \"/blogs/:id\",\n    render: ({\n      match\n    }) => React.createElement(Blog, {\n      blog: blogById(match.params.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }))));\n};\n\nconst mapStateToProps = state => {\n  return {\n    blogs: state.blogs,\n    loggedIn: state.loggedIn,\n    notification: state.notification,\n    users: state.users\n  };\n};\n\nexport default connect(mapStateToProps, {\n  initializeBlogs,\n  initializeUsers,\n  setAndResetNotification,\n  loginUser,\n  logoutUser\n})(App);","map":{"version":3,"sources":["/home/alisa/fullstack/osa7/bloglist-frontend/src/App.js"],"names":["React","useEffect","connect","BrowserRouter","Router","Route","Link","Redirect","Notification","LoginForm","Users","User","Bloglist","Blog","blogService","loginService","useField","setAndResetNotification","initializeBlogs","initializeUsers","loginUser","logoutUser","Container","Menu","Button","App","props","username","password","loggedUserJSON","window","localStorage","getItem","user","JSON","parse","setToken","token","loginForm","handleLogin","event","preventDefault","login","setItem","stringify","exception","message","type","handleLogout","removeItem","userById","id","users","find","blogsByUserId","blogs","filter","blog","blogById","loggedIn","notification","padding","name","match","params","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { BrowserRouter as Router, Route, Link, Redirect } from 'react-router-dom'\n\nimport Notification from './components/Notification'\nimport LoginForm from './components/LoginForm'\nimport Users from './components/Users'\nimport User from './components/User'\nimport Bloglist from './components/Bloglist'\nimport Blog from './components/Blog'\n\nimport blogService from './services/blogs'\nimport loginService from './services/login'\n\nimport { useField } from './hooks/useField'\nimport { setAndResetNotification } from './reducers/notificationReducer'\nimport { initializeBlogs } from './reducers/blogReducer'\nimport { initializeUsers } from './reducers/userReducer'\nimport { loginUser, logoutUser } from './reducers/loginReducer'\n\nimport { Container, Menu, Button } from 'semantic-ui-react'\n\nconst App = (props) => {\n\n  const username = useField('text')\n  const password = useField('password')\n\n  useEffect(() => {\n    props.initializeBlogs()\n  }, [])\n\n  useEffect(() => {\n    props.initializeUsers()\n  }, [])\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBloglistUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      props.loginUser(user)\n      blogService.setToken(user.token)\n    }\n  }, [])\n\n\n  const loginForm = () => {\n    return (\n      <LoginForm\n        username={username}\n        password={password}\n        handleSubmit={handleLogin}\n      />\n    )\n  }\n\n  const handleLogin = async (event) => {\n    event.preventDefault()\n\n    try {\n      const user = await loginService.login({\n        username, password\n      })\n      window.localStorage.setItem(\n        'loggedBloglistUser', JSON.stringify(user)\n      )\n      blogService.setToken(user.token)\n      props.loginUser(user)\n    } catch(exception) {\n      props.setAndResetNotification({\n        message: 'Wrong username or password',\n        type: 'error'\n      })\n    }\n  }\n\n  const handleLogout = () => {\n    window.localStorage.removeItem('loggedBloglistUser')\n    props.logoutUser()\n  }\n\n  const userById = (id) =>\n    props.users.find(user => user.id === id)\n\n  const blogsByUserId = (id) =>\n    props.blogs.filter(blog => blog.user.id === id)\n\n  const blogById = (id) =>\n    props.blogs.find(blog => blog.id === id)\n\n\n  if (props.loggedIn === null) {\n    return (\n      <Container>\n        <h1>Blog list app</h1>\n        <Notification type={props.notification.type} message={props.notification.message} />\n        <h2>Log in to application</h2>\n        {loginForm()}\n      </Container>\n    )\n  }\n\n  return (\n    <Container>\n      <Router>\n        <div>\n          <Menu>\n            <Menu.Item name='blogs'>\n              <Link style={{ padding: 5 }} to='/blogs'>blogs</Link>\n            </Menu.Item>\n            <Menu.Item name='users'>\n              <Link style={{ padding: 5 }} to='/users'>users</Link>\n            </Menu.Item>\n            <Menu.Item name='logged in'>\n              {props.loggedIn.name} logged in\n              <Button onClick={handleLogout}>logout</Button>\n            </Menu.Item>\n          </Menu>\n          <Route exact path='/' render={() => <Redirect to='/blogs' />} />\n          <Route exact path='/blogs' render={() => <Bloglist handleLogout={handleLogout}/>} />\n          <Route exact path='/users' render={() => <Users />} />\n          <Route exact path='/users/:id' render={({ match }) =>\n            <User user={userById(match.params.id)} blogs={blogsByUserId(match.params.id)} />\n          } />\n          <Route exact path='/blogs/:id' render={({ match }) =>\n            <Blog blog={blogById(match.params.id)} />\n          } />\n        </div>\n      </Router>\n    </Container>\n  )\n\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    blogs: state.blogs,\n    loggedIn: state.loggedIn,\n    notification: state.notification,\n    users: state.users\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  { initializeBlogs,\n    initializeUsers,\n    setAndResetNotification,\n    loginUser,\n    logoutUser })(App)"]},"metadata":{},"sourceType":"module"}