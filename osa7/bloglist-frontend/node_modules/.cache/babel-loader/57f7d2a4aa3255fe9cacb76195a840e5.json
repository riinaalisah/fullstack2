{"ast":null,"code":"var _jsxFileName = \"/home/alisa/fullstack/osa7/bloglist-frontend/src/App.js\";\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { BrowserRouter as Router, Route, Link, Redirect } from 'react-router-dom';\nimport LoginForm from './components/LoginForm';\nimport Users from './components/Users';\nimport User from './components/User';\nimport Bloglist from './components/Bloglist';\nimport Blog from './components/Blog';\nimport Home from './components/Home';\nimport Notification from './components/Notification';\nimport blogService from './services/blogs';\nimport loginService from './services/login';\nimport { useField } from './hooks/useField';\nimport { setAndResetNotification } from './reducers/notificationReducer';\nimport { initializeBlogs } from './reducers/blogReducer';\nimport { initializeUsers } from './reducers/userReducer';\nimport { loginUser, logoutUser } from './reducers/loginReducer';\nimport { Container, Menu, Button } from 'semantic-ui-react';\n\nconst App = props => {\n  const username = useField('text');\n  const password = useField('password');\n  useEffect(() => {\n    props.initializeBlogs();\n  }, []);\n  useEffect(() => {\n    props.initializeUsers();\n  }, [props.users]);\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBloglistUser');\n\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON);\n      props.loginUser(user);\n      blogService.setToken(user.token);\n    }\n  }, []);\n\n  const handleLogin = async event => {\n    event.preventDefault();\n\n    try {\n      const user = await loginService.login({\n        username,\n        password\n      });\n      window.localStorage.setItem('loggedBloglistUser', JSON.stringify(user));\n      blogService.setToken(user.token);\n      props.loginUser(user);\n    } catch (exception) {\n      props.setAndResetNotification({\n        message: 'Wrong username or password',\n        type: 'error'\n      });\n    }\n  };\n\n  const handleLogout = () => {\n    window.localStorage.removeItem('loggedBloglistUser');\n    props.logoutUser();\n  };\n\n  const userById = id => props.users.find(user => user.id === id);\n\n  const blogsByUserId = id => props.blogs.filter(blog => blog.user.id === id);\n\n  const blogById = id => props.blogs.find(blog => blog.id === id);\n\n  return React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(Router, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(Menu, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(Menu.Item, {\n    name: \"blogs\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(Link, {\n    style: {\n      padding: 5\n    },\n    to: \"/blogs\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, \"blogs\")), React.createElement(Menu.Item, {\n    name: \"users\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(Link, {\n    style: {\n      padding: 5\n    },\n    to: \"/users\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"users\")), props.loggedIn !== null ? React.createElement(Menu.Item, {\n    name: \"logged in\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, props.loggedIn.name, \" logged in\", React.createElement(Button, {\n    onClick: handleLogout,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, \"logout\")) : React.createElement(Menu.Item, {\n    name: \"login\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(Link, {\n    style: {\n      padding: 5\n    },\n    to: \"/login\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, \"log in\"))), React.createElement(Notification, {\n    type: props.notification.type,\n    message: props.notification.message,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    render: () => props.loggedIn ? React.createElement(Home, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }) : React.createElement(Redirect, {\n      to: \"/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: \"/login\",\n    render: () => props.loggedIn ? React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }) : React.createElement(LoginForm, {\n      username: username,\n      password: password,\n      handleSubmit: handleLogin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: \"/blogs\",\n    render: () => props.loggedIn ? React.createElement(Bloglist, {\n      handleLogout: handleLogout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }) : React.createElement(Redirect, {\n      to: \"/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: \"/users\",\n    render: () => props.loggedIn ? React.createElement(Users, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }) : React.createElement(Redirect, {\n      to: \"/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: \"/users/:id\",\n    render: ({\n      match\n    }) => props.loggedIn ? React.createElement(User, {\n      user: userById(match.params.id),\n      blogs: blogsByUserId(match.params.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }) : React.createElement(Redirect, {\n      to: \"/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: \"/blogs/:id\",\n    render: ({\n      match\n    }) => props.loggedIn ? React.createElement(Blog, {\n      blog: blogById(match.params.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }) : React.createElement(Redirect, {\n      to: \"/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }))));\n};\n\nconst mapStateToProps = state => {\n  return {\n    blogs: state.blogs,\n    loggedIn: state.loggedIn,\n    notification: state.notification,\n    users: state.users\n  };\n};\n\nexport default connect(mapStateToProps, {\n  initializeBlogs,\n  initializeUsers,\n  setAndResetNotification,\n  loginUser,\n  logoutUser\n})(App);","map":{"version":3,"sources":["/home/alisa/fullstack/osa7/bloglist-frontend/src/App.js"],"names":["React","useEffect","connect","BrowserRouter","Router","Route","Link","Redirect","LoginForm","Users","User","Bloglist","Blog","Home","Notification","blogService","loginService","useField","setAndResetNotification","initializeBlogs","initializeUsers","loginUser","logoutUser","Container","Menu","Button","App","props","username","password","users","loggedUserJSON","window","localStorage","getItem","user","JSON","parse","setToken","token","handleLogin","event","preventDefault","login","setItem","stringify","exception","message","type","handleLogout","removeItem","userById","id","find","blogsByUserId","blogs","filter","blog","blogById","padding","loggedIn","name","notification","match","params","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { BrowserRouter as Router, Route, Link, Redirect } from 'react-router-dom'\n\nimport LoginForm from './components/LoginForm'\nimport Users from './components/Users'\nimport User from './components/User'\nimport Bloglist from './components/Bloglist'\nimport Blog from './components/Blog'\nimport Home from './components/Home'\nimport Notification from './components/Notification'\n\nimport blogService from './services/blogs'\nimport loginService from './services/login'\n\nimport { useField } from './hooks/useField'\n\nimport { setAndResetNotification } from './reducers/notificationReducer'\nimport { initializeBlogs } from './reducers/blogReducer'\nimport { initializeUsers } from './reducers/userReducer'\nimport { loginUser, logoutUser } from './reducers/loginReducer'\n\nimport { Container, Menu, Button } from 'semantic-ui-react'\n\nconst App = (props) => {\n\n  const username = useField('text')\n  const password = useField('password')\n\n  useEffect(() => {\n    props.initializeBlogs()\n  }, [])\n\n  useEffect(() => {\n    props.initializeUsers()\n  }, [props.users])\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBloglistUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      props.loginUser(user)\n      blogService.setToken(user.token)\n    }\n  }, [])\n\n  const handleLogin = async (event) => {\n    event.preventDefault()\n\n    try {\n      const user = await loginService.login({\n        username, password\n      })\n      window.localStorage.setItem(\n        'loggedBloglistUser', JSON.stringify(user)\n      )\n      blogService.setToken(user.token)\n      props.loginUser(user)\n    } catch(exception) {\n      props.setAndResetNotification({\n        message: 'Wrong username or password',\n        type: 'error'\n      })\n    }\n  }\n\n  const handleLogout = () => {\n    window.localStorage.removeItem('loggedBloglistUser')\n    props.logoutUser()\n  }\n\n  const userById = (id) =>\n    props.users.find(user => user.id === id)\n\n  const blogsByUserId = (id) =>\n    props.blogs.filter(blog => blog.user.id === id)\n\n  const blogById = (id) =>\n    props.blogs.find(blog => blog.id === id)\n\n  return (\n    <Container>\n      <Router>\n        <div>\n          <Menu>\n            <Menu.Item name='blogs'>\n              <Link style={{ padding: 5 }} to='/blogs'>blogs</Link>\n            </Menu.Item>\n            <Menu.Item name='users'>\n              <Link style={{ padding: 5 }} to='/users'>users</Link>\n            </Menu.Item>\n            {props.loggedIn !== null\n              ? <Menu.Item name='logged in'>\n                {props.loggedIn.name} logged in\n                <Button onClick={handleLogout}>logout</Button>\n              </Menu.Item>\n              : <Menu.Item name='login'>\n                <Link style={{ padding: 5 }} to='/login'>log in</Link>\n              </Menu.Item>\n            }\n          </Menu>\n          <Notification type={props.notification.type} message={props.notification.message} />\n          <Route exact path='/' render={() =>\n            props.loggedIn ? <Home /> : <Redirect to='/login' />\n          } />\n          <Route exact path='/login' render={() =>\n            props.loggedIn ? <Redirect to='/' /> : <LoginForm\n              username={username}\n              password={password}\n              handleSubmit={handleLogin}\n            />\n          } />\n          <Route exact path='/blogs' render={() =>\n            props.loggedIn ? <Bloglist handleLogout={handleLogout} />\n              : <Redirect to='/login' />\n          } />\n          <Route exact path='/users' render={() =>\n            props.loggedIn ? <Users /> : <Redirect to='/login' />\n          } />\n          <Route exact path='/users/:id' render={({ match }) =>\n            props.loggedIn\n              ? <User user={userById(match.params.id)} blogs={blogsByUserId(match.params.id)} />\n              : <Redirect to='/login' />\n          } />\n          <Route exact path='/blogs/:id' render={({ match }) =>\n            props.loggedIn\n              ?  <Blog blog={blogById(match.params.id)} />\n              : <Redirect to='/login' />\n          } />\n        </div>\n      </Router>\n    </Container>\n  )\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    blogs: state.blogs,\n    loggedIn: state.loggedIn,\n    notification: state.notification,\n    users: state.users\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  { initializeBlogs,\n    initializeUsers,\n    setAndResetNotification,\n    loginUser,\n    logoutUser })(App)"]},"metadata":{},"sourceType":"module"}